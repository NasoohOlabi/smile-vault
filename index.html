<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUNK SHOP - Anarchy in Your Cart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&family=Permanent+Marker&family=Bungee&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rubik+Mono+One&family=Permanent+Marker&family=Bungee&display=swap');
        
        :root {
            --neon-pink: #ff006e;
            --neon-yellow: #ffbe0b;
            --neon-green: #8aff00;
            --dark-purple: #3a0ca3;
            --blood-red: #d00000;
        }

        body {
            background: #0a0a0a;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(255,0,110,0.05) 35px, rgba(255,0,110,0.05) 70px),
                repeating-linear-gradient(-45deg, transparent, transparent 35px, rgba(255,190,11,0.03) 35px, rgba(255,190,11,0.03) 70px);
            font-family: 'Permanent Marker', cursive;
        }

        .punk-title {
            font-family: 'Bungee', cursive;
            text-shadow: 
                3px 3px 0 var(--blood-red),
                -1px -1px 0 var(--neon-yellow),
                1px -1px 0 var(--neon-yellow),
                -1px 1px 0 var(--neon-yellow),
                1px 1px 0 var(--neon-yellow),
                0 0 20px var(--neon-pink);
            animation: glitch 2s infinite;
        }

        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }

        .torn-edge {
            clip-path: polygon(
                0% 0%, 100% 0%, 100% 95%, 
                98% 96%, 99% 97%, 97% 98%, 
                99% 99%, 98% 100%, 0% 100%
            );
        }

        .safety-pin {
            position: relative;
            display: inline-block;
            width: 30px;
            height: 30px;
        }

        .safety-pin::before {
            content: 'ðŸ§·';
            font-size: 24px;
            position: absolute;
            transform: rotate(-45deg);
        }

        .grunge-border {
            border: 3px solid var(--neon-pink);
            box-shadow: 
                inset 0 0 20px rgba(255,0,110,0.3),
                0 0 20px rgba(255,0,110,0.5);
            position: relative;
        }

        .grunge-border::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-yellow), var(--neon-green));
            z-index: -1;
            filter: blur(5px);
            opacity: 0.5;
        }

        .number-selector {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 2px solid var(--neon-yellow);
            box-shadow: 
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 0 10px var(--neon-yellow);
        }

        .btn-punk {
            background: linear-gradient(135deg, var(--blood-red), var(--neon-pink));
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .btn-punk:hover {
            transform: scale(1.05) rotate(-1deg);
            box-shadow: 0 0 30px var(--neon-pink);
        }

        .btn-punk::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-punk:hover::before {
            left: 100%;
        }

        .product-card {
            background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
            transform: rotate(-1deg);
            transition: all 0.3s;
        }

        .product-card:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
        }

        .anarchy-symbol {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: var(--neon-pink);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: spin 10s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .spray-paint {
            filter: contrast(2) brightness(1.2);
            mix-blend-mode: screen;
        }

        .modal-backdrop {
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(5px);
        }

        .price-tag {
            background: var(--neon-yellow);
            color: #000;
            transform: rotate(-5deg);
            padding: 5px 10px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- Header with Order Button -->
    <header class="relative overflow-hidden bg-gradient-to-b from-black to-transparent p-6">
        <div class="absolute inset-0 opacity-20">
            <div class="anarchy-symbol absolute top-4 left-4"></div>
            <div class="anarchy-symbol absolute top-4 right-4" style="animation-delay: -5s;"></div>
        </div>
        
        <div class="container mx-auto relative z-10">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="punk-title text-5xl md:text-7xl text-pink-500 mb-2">
                        PUNK SHOP
                    </h1>
                    <p class="text-yellow-400 text-xl" style="font-family: 'Rubik Mono One', monospace;">
                        ðŸŽ¸ NO RULES, NO REGRETS ðŸŽ¸
                    </p>
                </div>
                
                <button 
                    onclick="showOrderSummary()"
                    class="btn-punk px-8 py-4 rounded-none text-xl font-bold relative group"
                >
                    <span class="safety-pin absolute -top-2 -left-2"></span>
                    <span class="relative z-10">
                        ORDER NOW
                        <span id="cartCount" class="ml-2 bg-yellow-400 text-black px-2 py-1 rounded text-sm">0</span>
                    </span>
                    <span class="safety-pin absolute -bottom-2 -right-2 transform rotate-90"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Reset Button -->
        <div class="text-center mb-8">
            <button 
                onclick="resetAll()"
                class="btn-punk px-6 py-3 text-lg"
            >
                ðŸ’£ RESET ALL ðŸ’£
            </button>
        </div>

        <!-- Products Grid -->
        <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Products will be dynamically inserted here -->
        </div>
    </main>

    <!-- Order Summary Modal -->
    <div id="orderModal" class="fixed inset-0 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-black border-4 border-pink-500 max-w-2xl w-full max-h-[80vh] overflow-y-auto relative torn-edge">
            <button 
                onclick="closeOrderSummary()"
                class="absolute top-4 right-4 text-4xl hover:text-pink-500 transition-colors"
            >
                âœ•
            </button>
            
            <div class="p-8">
                <h2 class="punk-title text-4xl text-pink-500 mb-6">ORDER SUMMARY</h2>
                <div id="orderContent" class="space-y-4">
                    <!-- Order content will be inserted here -->
                </div>
                
                <div class="mt-8 pt-8 border-t-2 border-pink-500">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-2xl font-bold text-yellow-400">TOTAL:</span>
                        <span id="totalPrice" class="text-3xl font-bold text-green-400">$0.00</span>
                    </div>
                    
                    <form 
                        hx-post="/api/order"
                        hx-trigger="submit"
                        hx-target="#orderResponse"
                        hx-swap="innerHTML"
                        class="space-y-4"
                    >
                        <input type="hidden" id="orderData" name="orderData">
                        
                        <div>
                            <label class="block text-yellow-400 mb-2">YOUR NAME (REBEL):</label>
                            <input 
                                type="text" 
                                name="customerName"
                                required
                                class="w-full bg-gray-900 border-2 border-pink-500 px-4 py-2 text-white focus:outline-none focus:border-yellow-400"
                                placeholder="Anarchy Anderson"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-yellow-400 mb-2">EMAIL:</label>
                            <input 
                                type="email" 
                                name="email"
                                required
                                class="w-full bg-gray-900 border-2 border-pink-500 px-4 py-2 text-white focus:outline-none focus:border-yellow-400"
                                placeholder="rebel@punk.com"
                            >
                        </div>
                        
                        <button 
                            type="submit"
                            class="btn-punk w-full py-4 text-xl font-bold"
                        >
                            ðŸš€ SUBMIT ORDER ðŸš€
                        </button>
                    </form>
                    
                    <div id="orderResponse" class="mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Product data
        const products = [
            { id: 1, name: "ANARCHY TEE", price: 29.99, image: "https://picsum.photos/seed/punk1/300/300" },
            { id: 2, name: "SAFETY PIN JACKET", price: 89.99, image: "https://picsum.photos/seed/punk2/300/300" },
            { id: 3, name: "RIPPED JEANS", price: 59.99, image: "https://picsum.photos/seed/punk3/300/300" },
            { id: 4, name: "COMBAT BOOTS", price: 129.99, image: "https://picsum.photos/seed/punk4/300/300" },
            { id: 5, name: "SPIKE BRACELET", price: 19.99, image: "https://picsum.photos/seed/punk5/300/300" },
            { id: 6, name: "LEATHER JACKET", price: 199.99, image: "https://picsum.photos/seed/punk6/300/300" },
            { id: 7, name: "CHAIN WALLET", price: 34.99, image: "https://picsum.photos/seed/punk7/300/300" },
            { id: 8, name: "SKULL TEE", price: 24.99, image: "https://picsum.photos/seed/punk8/300/300" }
        ];

        // Initialize products
        function initializeProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            products.forEach(product => {
                const savedQuantity = localStorage.getItem(`product_${product.id}`) || '0';
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card grunge-border p-4';
                productCard.innerHTML = `
                    <div class="relative">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-64 object-cover spray-paint">
                        <div class="absolute top-2 right-2">
                            <span class="price-tag">$${product.price}</span>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mt-4 text-yellow-400" style="font-family: 'Rubik Mono One', monospace;">
                        ${product.name}
                    </h3>
                    <div class="mt-4 flex items-center justify-center space-x-4">
                        <button 
                            onclick="updateQuantity(${product.id}, -1)"
                            class="bg-pink-500 hover:bg-pink-600 text-black w-10 h-10 font-bold text-xl transition-all hover:scale-110"
                        >
                            -
                        </button>
                        <div class="number-selector px-6 py-2 rounded">
                            <input 
                                type="number" 
                                id="qty-${product.id}"
                                value="${savedQuantity}"
                                min="0"
                                max="99"
                                onchange="setQuantity(${product.id}, this.value)"
                                class="bg-transparent text-center text-2xl font-bold text-yellow-400 w-16 focus:outline-none"
                                style="font-family: 'Rubik Mono One', monospace;"
                            >
                        </div>
                        <button 
                            onclick="updateQuantity(${product.id}, 1)"
                            class="bg-green-500 hover:bg-green-600 text-black w-10 h-10 font-bold text-xl transition-all hover:scale-110"
                        >
                            +
                        </button>
                    </div>
                `;
                grid.appendChild(productCard);
            });
            
            updateCartCount();
        }

        // Update quantity
        function updateQuantity(productId, change) {
            const input = document.getElementById(`qty-${productId}`);
            let newValue = parseInt(input.value) + change;
            newValue = Math.max(0, Math.min(99, newValue));
            input.value = newValue;
            localStorage.setItem(`product_${productId}`, newValue);
            updateCartCount();
        }

        // Set quantity directly
        function setQuantity(productId, value) {
            const newValue = Math.max(0, Math.min(99, parseInt(value) || 0));
            document.getElementById(`qty-${productId}`).value = newValue;
            localStorage.setItem(`product_${productId}`, newValue);
            updateCartCount();
        }

        // Update cart count
        function updateCartCount() {
            let total = 0;
            products.forEach(product => {
                total += parseInt(localStorage.getItem(`product_${product.id}`) || '0');
            });
            document.getElementById('cartCount').textContent = total;
        }

        // Reset all
        function resetAll() {
            if (confirm('ðŸ”¥ RESET EVERYTHING? ARE YOU SURE? ðŸ”¥')) {
                products.forEach(product => {
                    localStorage.removeItem(`product_${product.id}`);
                    document.getElementById(`qty-${product.id}`).value = '0';
                });
                updateCartCount();
            }
        }

        // Show order summary
        function showOrderSummary() {
            const modal = document.getElementById('orderModal');
            const content = document.getElementById('orderContent');
            let total = 0;
            let orderItems = [];
            
            content.innerHTML = '';
            
            products.forEach(product => {
                const quantity = parseInt(localStorage.getItem(`product_${product.id}`) || '0');
                if (quantity > 0) {
                    const subtotal = product.price * quantity;
                    total += subtotal;
                    orderItems.push({ id: product.id, name: product.name, quantity, price: product.price, subtotal });
                    
                    const item = document.createElement('div');
                    item.className = 'flex justify-between items-center p-3 bg-gray-900 border-l-4 border-pink-500';
                    item.innerHTML = `
                        <div>
                            <span class="text-yellow-400 font-bold">${product.name}</span>
                            <span class="text-gray-400 ml-2">x${quantity}</span>
                        </div>
                        <span class="text-green-400 font-bold">$${subtotal.toFixed(2)}</span>
                    `;
                    content.appendChild(item);
                }
            });
            
            if (orderItems.length === 0) {
                content.innerHTML = '<p class="text-center text-gray-400 text-xl">YOUR CART IS EMPTY, REBEL!</p>';
            }
            
            document.getElementById('totalPrice').textContent = `$${total.toFixed(2)}`;
            document.getElementById('orderData').value = JSON.stringify(orderItems);
            modal.classList.remove('hidden');
        }

        // Close order summary
        function closeOrderSummary() {
            document.getElementById('orderModal').classList.add('hidden');
            document.getElementById('orderResponse').innerHTML = '';
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initializeProducts);

        // Close modal on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeOrderSummary();
            }
        });
    </script>
</body>
</html>